# Auto-generated by oag â€” do not edit
from __future__ import annotations

from fastapi import APIRouter, Path, Query
from fastapi.responses import StreamingResponse

from models import (
{% for import in model_imports %}
    {{ import }},
{% endfor %}
)
from sse import sse_response

router = APIRouter()
{% for op in operations %}

{% if op.kind == "standard" %}
@router.{{ op.http_method }}("{{ op.path }}")
{% if op.summary %}
async def {{ op.name }}(
{% else %}
async def {{ op.name }}(
{% endif %}
{% for param in op.params %}
{% if param.location == "path" %}
    {{ param.name }}: {{ param.type_str }},
{% elif param.location == "query" %}
{% if param.required %}
    {{ param.name }}: {{ param.type_str }}{% if param.needs_alias %} = Query(alias="{{ param.original_name }}"){% endif %},
{% else %}
    {{ param.name }}: {{ param.type_str }} | None = Query(default=None{% if param.needs_alias %}, alias="{{ param.original_name }}"{% endif %}),
{% endif %}
{% endif %}
{% endfor %}
{% if op.has_body %}
    {{ op.body_param_name }}: {{ op.body_type }},
{% endif %}
) -> {{ op.return_type }}:
{% if op.summary %}
    """{{ op.summary | escape_docstring }}"""
{% endif %}
    raise NotImplementedError

{% elif op.kind == "void" %}
@router.{{ op.http_method }}("{{ op.path }}", status_code=204)
async def {{ op.name }}(
{% for param in op.params %}
{% if param.location == "path" %}
    {{ param.name }}: {{ param.type_str }},
{% elif param.location == "query" %}
{% if param.required %}
    {{ param.name }}: {{ param.type_str }}{% if param.needs_alias %} = Query(alias="{{ param.original_name }}"){% endif %},
{% else %}
    {{ param.name }}: {{ param.type_str }} | None = Query(default=None{% if param.needs_alias %}, alias="{{ param.original_name }}"{% endif %}),
{% endif %}
{% endif %}
{% endfor %}
{% if op.has_body %}
    {{ op.body_param_name }}: {{ op.body_type }},
{% endif %}
) -> None:
{% if op.summary %}
    """{{ op.summary | escape_docstring }}"""
{% endif %}
    raise NotImplementedError

{% elif op.kind == "sse" %}
@router.{{ op.http_method }}("{{ op.path }}")
async def {{ op.name }}(
{% for param in op.params %}
{% if param.location == "path" %}
    {{ param.name }}: {{ param.type_str }},
{% elif param.location == "query" %}
{% if param.required %}
    {{ param.name }}: {{ param.type_str }}{% if param.needs_alias %} = Query(alias="{{ param.original_name }}"){% endif %},
{% else %}
    {{ param.name }}: {{ param.type_str }} | None = Query(default=None{% if param.needs_alias %}, alias="{{ param.original_name }}"{% endif %}),
{% endif %}
{% endif %}
{% endfor %}
{% if op.has_body %}
    {{ op.body_param_name }}: {{ op.body_type }},
{% endif %}
) -> StreamingResponse:
{% if op.summary %}
    """{{ op.summary | escape_docstring }}"""
{% endif %}
    # TODO: implement SSE streaming logic
    # Return: sse_response(your_async_generator)
    raise NotImplementedError
{% endif %}
{% endfor %}
